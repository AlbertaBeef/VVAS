


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Video Analytics SDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Base Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/common_plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/for_developers.html">For Advanced Developers</a></li>
</ul>
<p class="caption"><span class="caption-text">Embedded</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/platforms_and_applications.html">Platforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/6-embedded-plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Embedded/Tutorials/Tutorials.html">Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Center</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="platforms_and_applications.html">Plattforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="6-DC-plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../freq_asked_questions.html">Frequently Asked Questions</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/docs/DC/gstreamer_example_pipelines.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis™ Video Analytics SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>GStreamer Pipelines</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/DC/gstreamer_example_pipelines.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gstreamer-pipelines">
<h1>GStreamer Pipelines<a class="headerlink" href="#gstreamer-pipelines" title="Permalink to this headline">¶</a></h1>
<p>This section covers various example pipelines using <code class="docutils literal notranslate"><span class="pre">gst-launch</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running each script without any argument gives the example on how to run that script and the required arguments. Go to scripts folder inside release package folder and run the below scripts. By default, all scripts use filesink plugin and writes the output files into /tmp directory.</p>
</div>
<p>There is a chance that due to the massive bandwidth required for operating on these RAW files, you will notice a drop in FPS; this is not due to the U30 card, but the disk speeds. We recommend reading/writing from /dev/shm which is a RAM disk. Most of the scripts also have provision to use fakesink plugin which displays only performance numbers and will not write output to files. This is done by giving last argument “fakesink” to 1. Each script also has checks along with the Gstreamer pipeline command to help users avoid giving incorrect arguments.</p>
<p>Set VVAS environment variables using below command (this must be done in every current terminal session):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>source /opt/xilinx/xcdr/setup.sh
source /opt/xilinx/ivas/setup.sh

Missing to source the above setup script in current terminal, it gives the error “xbutil: command not found”
</pre></div>
</div>
<div class="section" id="decode-only-pipeline">
<h2>Decode only Pipeline<a class="headerlink" href="#decode-only-pipeline" title="Permalink to this headline">¶</a></h2>
<p>This example accepts a clip that is already encoded in h.264 and will decode it using ivas_xvcudec plugin file into a RAW NV12 format and save it to disk at /tmp/xil_dec_out_*.nv12. To get more understanding of the ivas_xvcudec plugin properties, refer to the section VVAS VCU Decoder Plug-in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">01</span><span class="n">_gst_decode_only</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">Test_1080p60</span><span class="o">.</span><span class="n">h264</span> <span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./01_gst_decode_only.sh &lt;device index&gt; &lt;Input H264 file&gt; &lt;Number of decoder instances, 1 to 8&gt; &lt;fakesink 0/1&gt;

All the scripts work with h.264 input streams. To use h.265 input stream, update the scripts to use “h265parse”
plugin instead of “h264parse”. Similarly, the encoder profile must be changed from “high” to “main” for h.265
streams and the levels accordingly.
</pre></div>
</div>
</div>
<div class="section" id="encode-only-pipeline">
<h2>Encode only Pipeline<a class="headerlink" href="#encode-only-pipeline" title="Permalink to this headline">¶</a></h2>
<p>This example accepts a RAW 1080p60 clip in NV12 format. It will pass the clip to the encoder using <code class="docutils literal notranslate"><span class="pre">ivas_xvcuenc</span></code> plugin  to produce an h.264 encoded outputs with a target bitrate of 8Mbps and save it to disk at /tmp/xil_enc_out_*.h264. To get more understanding of the ivas_xvcuenc plugin properties, refer to the section VVAS VCU Encoder Plug-in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">02</span><span class="n">_gst_h264_encode_only_1080p</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">Test_1080p</span><span class="o">.</span><span class="n">nv12</span> <span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">02</span><span class="n">_gst_h264_encode_only_1080p</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="mi">1080</span><span class="n">p</span> <span class="n">NV12</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">encoder</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">8</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-transcode">
<h2>Basic Transcode<a class="headerlink" href="#basic-transcode" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates how to achieve simple transcoding, i.e. encoding format change without resolution change. Input is H.264 elementary stream, 1080p60, from file source, decoded using hardware decoder and then re-encoded using vcu hardware encoder to H.264 format. To get more understanding of the <code class="docutils literal notranslate"><span class="pre">ivas_xvcudec</span></code> plugin properties, refer to the section VVAS VCU Decoder Plug-in. To get more understanding of the <code class="docutils literal notranslate"><span class="pre">ivas_xvcuenc</span></code> plugin properties, refer to the section VVAS VCU Encoder Plug-in.
The output files are stored at /tmp/xil_xcode_out_*.h264</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">03</span><span class="n">_gst_h264_transcode_only</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">Test_1080p60</span><span class="o">.</span><span class="n">h264</span> <span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">03</span><span class="n">_gst_h264_transcode_only</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="n">H264</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">transcode</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">8</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="decode-only-into-multiple-resolution-outputs">
<h2>Decode only into Multiple-Resolution outputs<a class="headerlink" href="#decode-only-into-multiple-resolution-outputs" title="Permalink to this headline">¶</a></h2>
<p>This example will decode an 8-bit, YUV420, pre-encoded 60FPS MP4 file with h.264 content as input and  scales this decoded output into multiple renditions of various sizes and send them back to disk in /tmp/sink_dec_scal*.nv12.
The 1080p60 input is scaled down to the following resolutions and framerates (respectively):
720p60, 720p30, 480p30, 360p30, 288p30</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">04</span><span class="n">_gst_decode_plus_scale</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">bbb_sunflower_1080p_60fps_normal</span><span class="o">.</span><span class="n">mp4</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">04</span><span class="n">_gst_decode_plus_scale</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="n">MP4</span> <span class="n">file</span> <span class="k">with</span> <span class="n">H264</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">num</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">buffers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="n">Num</span> <span class="n">of</span> <span class="n">buffers</span> <span class="k">as</span> <span class="o">-</span><span class="mi">1</span> <span class="n">will</span> <span class="n">run</span> <span class="n">the</span> <span class="n">complete</span> <span class="n">video</span> <span class="n">stream</span><span class="o">.</span> <span class="n">For</span> <span class="nb">any</span> <span class="n">positive</span> <span class="n">value</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">decode</span> <span class="n">only</span> <span class="n">those</span> <span class="n">many</span> <span class="n">buffers</span>
</pre></div>
</div>
</div>
<div class="section" id="encode-only-into-multiple-resolution-outputs">
<h2>Encode only into Multiple-Resolution outputs<a class="headerlink" href="#encode-only-into-multiple-resolution-outputs" title="Permalink to this headline">¶</a></h2>
<p>This example will take a 1080p60 RAW NV12 file and scale it and encode it into the resolutions as defined below and save them to disk under <strong>/tmp/sink_scale_enc*.h264</strong>
720p60, 720p30, 480p30, 360p30, 288p30</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">05</span><span class="n">_gst_encode_plus_scale_1080p</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">Test_1080p</span><span class="o">.</span><span class="n">nv12</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">05</span><span class="n">_gst_encode_plus_scale_1080p</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="mi">8</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span> <span class="n">YUV420</span><span class="p">,</span> <span class="mi">1080</span><span class="n">p60</span> <span class="n">RAW</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">num</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">buffers</span><span class="o">&gt;&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="transcode-with-multiple-resolution-outputs">
<h2>Transcode with Multiple-Resolution outputs<a class="headerlink" href="#transcode-with-multiple-resolution-outputs" title="Permalink to this headline">¶</a></h2>
<p>This example will do a full transcode pipeline on an 1080p60 h.264 input, scale it into the resolutions below, and re-encode them, saving them in /tmp/sink_xcode_scale_*.h264</p>
<p>The 1080p60 input is scaled down and encoded back to the following resolutions and framerates (respectively):
720p60, 720p30, 480p30, 360p30, 288p30
::
./06_gst_transcode_plus_scale.sh 0 ~/videos/bbb_sunflower_1080p_60fps_normal.mp4 1 -1 0</p>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">06</span><span class="n">_gst_transcode_plus_scale</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="n">MP4</span> <span class="n">file</span> <span class="k">with</span> <span class="n">H264</span> <span class="n">content</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">num</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">buffers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="lower-latency-transcode-with-multiple-resolution-outputs">
<h2>Lower latency Transcode with Multiple-Resolution outputs<a class="headerlink" href="#lower-latency-transcode-with-multiple-resolution-outputs" title="Permalink to this headline">¶</a></h2>
<p>This example is the same as full transcode pipeline (decode, scale, encode), saving the scaled outputs into the files /tmp/sink_ll_*.h264. This differs in that it is a <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">latency</span></code> version, which doesn’t encode <code class="docutils literal notranslate"><span class="pre">B-frames</span></code>, and reduces the lookahead depth. This, in short, decreases the latency at the cost of visual quality.
This example will output corrupt data if you provide an input file that contains B-Frames.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">07</span><span class="n">_gst_transcode_plus_scale_lowlatency</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">bbb_sunflower_1080p_60fps_normal</span><span class="o">.</span><span class="n">mp4</span> <span class="mi">1</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">0</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">07</span><span class="n">_gst_transcode_plus_scale_lowlatency</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="n">MP4</span> <span class="n">file</span> <span class="k">with</span> <span class="n">H264</span> <span class="n">content</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">num</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">buffers</span><span class="o">&gt;&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="k-considerations">
<h2>4K Considerations<a class="headerlink" href="#k-considerations" title="Permalink to this headline">¶</a></h2>
<p>4k videos are supported with two notes below; otherwise, no changes to the commands/examples above are required, except when processing RAW input files where width x height is changed from 1920x1080 to 3840x2160.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Scaling Restrictions</p>
<p>In this current release (0.96.0), 4k is only supported without a scaler in the pipeline. You may:
- Decode Only
- Encode Only
- Transcode (Decode -&gt; Encode)</p>
</div>
<div class="section" id="encoding">
<h3>Encoding<a class="headerlink" href="#encoding" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>4K H.264 Live-Encode</dt><dd><p>While most use-cases will not involve live-streaming 4k sized H.264/HEVC files, should you wish to do this, an example command line follows and the output file is stored at <strong>/tmp/xil_4k_enc_out.h265</strong></p>
</dd>
</dl>
<dl class="simple">
<dt>::</dt><dd><p>./08_gst_encode_only_4k.sh 0 ~/videos/test4K.nv12 1 0</p>
</dd>
</dl>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">08</span><span class="n">_gst_encode_only_4k</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">Device</span> <span class="n">Index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">raw</span> <span class="mi">4</span><span class="n">K</span> <span class="n">nv12</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">encode</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
<dl class="simple">
<dt>4K H.264 Live-Transcode</dt><dd><p>The output is stored at <cite>/tmp/xil_4k_xcode.h264</cite>. Command:</p>
</dd>
</dl>
<dl class="simple">
<dt>::</dt><dd><p>./09_gst_transcode_only_4k.sh 0 ~/videos/xil_4k.h264 1 0</p>
</dd>
</dl>
<p>The format of the script is:
::
./09_gst_transcode_only_4k.sh &lt;Device Index&gt; &lt;Input 4K H264 file&gt; &lt;Number of transcode instances, 1 to 2&gt;&lt;fakesink 0/1&gt;</p>
</div>
</div>
<div class="section" id="faster-than-real-time">
<h2>Faster Than Real Time<a class="headerlink" href="#faster-than-real-time" title="Permalink to this headline">¶</a></h2>
<p>The U30 is optimized for <code class="docutils literal notranslate"><span class="pre">low</span> <span class="pre">latency</span></code> <code class="docutils literal notranslate"><span class="pre">realtime</span></code> applications. It provides deterministic low latency transcoding, while operating at the FPS the human eye would normally process/watch it. This is ideal for ingesting a live video stream where there is minimal buffering.
Faster Than Real Time (FTRT) is almost the contrary: you have the entire file/clip saved and can therefore “divide and conquer”. There are two main flags to consider when processing in this flow: cores and slices. The outputs are stored in <cite>/tmp/xil_xcode_ftrt_out_*.h264</cite>. This script can be best demonstrated only if the number of instances are less than what a device is capable of, e.g. 1 instance as shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">11</span><span class="n">_gst_ftrt_transcode_only</span><span class="o">.</span><span class="n">sh</span> <span class="mi">0</span> <span class="o">~/</span><span class="n">videos</span><span class="o">/</span><span class="n">Test_1080p60</span><span class="o">.</span><span class="n">h264</span> <span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>The format of the script is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="mi">11</span><span class="n">_gst_ftrt_transcode_only</span><span class="o">.</span><span class="n">sh</span> <span class="o">&lt;</span><span class="n">device</span> <span class="n">index</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Input</span> <span class="n">H264</span> <span class="n">file</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">Number</span> <span class="n">of</span> <span class="n">transcode</span> <span class="n">instances</span><span class="p">,</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">8</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">fakesink</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on August 2, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>