


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="VVAS GStreamer Plug-ins for Embedded Platforms" href="6-embedded-plugins.html" />
    <link rel="prev" title="Multichannel ML" href="Tutorials/MultiChannelML.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis™ Video Analytics SDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Base Infrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/common_plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/for_developers.html">For Advanced Developers</a></li>
</ul>
<p class="caption"><span class="caption-text">Embedded</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="platforms_and_applications.html">Platforms &amp; Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="platforms_and_applications.html#som-examples">SOM Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="platforms_and_applications.html#zcu104-examples">ZCU104 Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Tutorials/MultiChannelML.html">Multi Channel ML</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Smart Model Select</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparing-the-setup">Preparing the setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-application">Running the application</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-design">Build Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-hardware-accelerators-kernels">Compiling Hardware Accelerators (Kernels)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-sd-card-image">Creating SD Card image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#build-vvas-plug-ins-and-libraries">Build VVAS Plug-ins and Libraries</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="6-embedded-plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tutorials/Tutorials.html">Tutorials</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Center</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../DC/platforms_and_applications.html">Plattforms &amp; Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DC/6-DC-plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">White Papers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/6-common-Acceleration-Software-Library-Development.html">TBD</a></li>
</ul>
<p class="caption"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/6-common-Acceleration-Software-Library-Development.html">TBD</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../freq_asked_questions.html">Frequently Asked Questions</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/docs/Embedded/smart_model_select.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis™ Video Analytics SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="platforms_and_applications.html">Platforms And Applications</a> &raquo;</li>
        
      <li>Smart Model Select</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/Embedded/smart_model_select.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="smart-model-select">
<h1>Smart Model Select<a class="headerlink" href="#smart-model-select" title="Permalink to this headline">¶</a></h1>
<p>Smart Model Select is an example application to demonstrate inferencing using 16 Machine Learning (ML) models supported by VVAS.
Smart Model Select application design is built on <code class="docutils literal notranslate"><span class="pre">zcu104</span></code> development board which, along with VVAS,
provides a complete framework for building and customizing video platforms with different pipelines stages.
<code class="docutils literal notranslate"><span class="pre">zcu104</span></code> development board can support below mentioned pipeline stages:</p>
<ul class="simple">
<li><p>Capture Pipelines</p></li>
<li><p>Video Processing Pipelines</p></li>
<li><p>Acceleration Pipelines</p></li>
<li><p>Output Pipelines</p></li>
</ul>
<p>Smart Model Select design doesn’t support Capture Pipeline.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Smart Model Select application supports below mentioned features</p>
<ul class="simple">
<li><p>Supports 16 ML Models
- resnet50
- resnet18
- mobilenet_v2
- inception_v1
- ssd_adas_pruned_0_95
- ssd_traffic_pruned_0_9
- ssd_mobilenet_v2
- ssd_pedestrian_pruned_0_97
- tiny_yolov3_vmss
- yolov3_voc_tf
- yolov3_adas_pruned_0_9
- refinedet_pruned_0_96
- yolov2_voc
- yolov2_voc_pruned_0_77
- densebox_320_320
- densebox_640_360</p></li>
<li><p>Display Port for display</p></li>
<li><p>H264/H265 Decode</p></li>
<li><p>Input can be from file, rtsp source</p></li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before attempting the execution of application, please ensure that all the pre-requisites mentioned below are fulfilled.</p>
<div class="section" id="hardware-requirements">
<h3>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.xilinx.com/products/boards-and-kits/zcu104.html">ZCU104 Evaluation Board Rev 1.0</a></p></li>
<li><p>Micro USB cable, connected to laptop or desktop computer for the terminal emulator</p></li>
<li><p>Micro SD card, 8 GB or larger, class 10 (recommended)</p></li>
<li><p>Display port 1.2 supported Monitor with 1920x1080 as max resolution</p></li>
<li><p>Display port 1.2 cable</p></li>
</ul>
</div>
<div class="section" id="software-tools-requirements">
<h3>Software/Tools Requirements<a class="headerlink" href="#software-tools-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Serial terminal emulator (for example, Tera Term)</p></li>
<li><p>Balena etcher or equivalent flashing tool to flash the SD Card image</p></li>
</ul>
</div>
<div class="section" id="system-requirements">
<h3>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Board must have access to the internet and be accessible from your development system</p></li>
</ul>
</div>
<div class="section" id="application-design">
<h3>Application Design<a class="headerlink" href="#application-design" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Model</span> <span class="pre">Select</span></code> application design has a platform and integrated accelerator functions.
Platform is nothing but collection of hardware as well as software components required to build a solution.
Prebuilt design for <code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Model</span> <span class="pre">Select</span></code> has been provided as part of this VVAS release.
You may download this ready to use design by following the link <a class="reference internal" href="#prebuilt-binaries"><span class="std std-ref">Download pre-built binaries</span></a> and
directly jump to <a class="reference internal" href="#preparing-setup"><span class="std std-ref">Preparing Setup</span></a> section describing how to prepare the setup and execute the example application.</p>
<p>If for some reason, one wants to build the design from scratch, then refer to the section <a class="reference internal" href="#build-platform"><span class="std std-ref">Build Design</span></a> that describes the steps to build the platform, accelerator functions and finally integrate these to create complete Design for <cite>Smart Camera Select</cite> application.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>VVAS platform <code class="docutils literal notranslate"><span class="pre">zcu104_vcuDec_DP</span></code> may not be performance optimal. This platform is made available as reference along with <cite>Smart Model Select Application</cite>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>VVAS platform <code class="docutils literal notranslate"><span class="pre">zcu104_vcuDec_DP</span></code> adds patch to irps5401 driver for zcu104 board to support multi thread execution of VAI models.
This <a class="reference external" href="https://github.com/Xilinx/Vitis-AI/tree/master/dsa/DPU-TRD/app/dpu_sw_optimize.tar.gz">patch</a> shouldn’t be applied to other boards
and is not part of the official Xilinx released 2021.1 Petalinux.</p>
</div>
</div>
<div class="section" id="pre-built-binaries">
<span id="prebuilt-binaries"></span><h3>Pre-built binaries<a class="headerlink" href="#pre-built-binaries" title="Permalink to this headline">¶</a></h3>
<p>Ready to use Prebuilt binaries are provided with this VVAS release. You can download these binaries and required supporting files and quickly run the example application.</p>
<p>Create a folder, say <cite>PREBUILT_BINARIES</cite>, where pre-built binaries are to be downloaded.</p>
<p>Click on <code class="docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Prebuilt</span> <span class="pre">Binaries</span></code>. This will take you to the page where prebuilt binaries for all supported platforms are stored.</p>
<p>Download pre-built binaries package <cite>vvas_smart_model_select_2021.1_zcu104.zip</cite> and unzip it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unzip</span> <span class="n">vvas_smart_model_select_2021</span><span class="o">.</span><span class="mi">1</span><span class="n">_zcu104</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p>Prebuilt binaries package includes</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sd_card.img</span></code>: Image to be flashed on the SD Card on the zcu104 board.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sdk.sh</span></code>: This is required to generate sysroot. Sysroot is required  <strong>only</strong> if one wants to build the VVAS plugins and
libraries. You do not need this if you simply wants to execute te pre-built application.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models</span></code>: Supported DPU models on this platform.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app</span></code>: Contains application executable and input configuration/json files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arch.json</span></code>: Represents DPU architecture.</p></li>
</ul>
<p>Once you have downloaded the prebuilt binaries, you need to prepare the setup to execute the application, as shown in the next section.</p>
</div>
</div>
<div class="section" id="preparing-the-setup">
<span id="preparing-setup"></span><h2>Preparing the setup<a class="headerlink" href="#preparing-the-setup" title="Permalink to this headline">¶</a></h2>
<p>It is assumed that all the pre-reqisites are fufilled and we are ready to setup the board and execute the example application. There are few steps that are required only for the first time when the <code class="docutils literal notranslate"><span class="pre">zcu104</span></code> board is not flashed with the sd_card image for <code class="docutils literal notranslate"><span class="pre">smart_model_select</span></code> application. You may skip these steps if <code class="docutils literal notranslate"><span class="pre">zcu104</span></code> board has already been flashed with the required sd_card image.</p>
<div class="section" id="one-time-setup">
<h3>One time setup<a class="headerlink" href="#one-time-setup" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Flash the SD Card with the <code class="docutils literal notranslate"><span class="pre">sd_card.img</span></code> using any SD card flashing tool like dd, Win32DiskImager, or BalenaEtcher.</p>
<p>If using pre-built binaries, then sd_card.img is located as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">PREBUILT_BINARIES</span><span class="o">&gt;/</span><span class="n">vvas_smart_model_select_2021</span><span class="o">.</span><span class="mi">1</span><span class="n">_zcu104</span><span class="o">/</span><span class="n">sd_card</span><span class="o">.</span><span class="n">img</span>
</pre></div>
</div>
<p>If you have built the platform yourself, then sd_card.img would be located at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">examples</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">smart_model_select</span><span class="o">/</span><span class="n">binary_container_1</span><span class="o">/</span><span class="n">sd_card</span><span class="o">.</span><span class="n">img</span>
</pre></div>
</div>
</li>
<li><p>Insert this SD card in the SD card slot on the zcu104 board and boot the board.</p></li>
<li><p>After booting up the board, run below command to extend the root filesystem partition to its 100% size. This is useful
in copying input video streams and storing output files from example application.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resize</span><span class="o">-</span><span class="n">part</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">mmcblk0p2</span>
</pre></div>
</div>
</li>
<li><p>Copy the <cite>&lt;PREBUILT_BINARIES&gt;/vvas_smart_model_select_2021.1_zcu104/app</cite> folder of the application onto <cite>home</cite> folder of the board.
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">-</span><span class="n">r</span> <span class="o">&lt;</span><span class="n">PREBUILT_BINARIES</span><span class="o">&gt;/</span><span class="n">vvas_smart_model_select_2021</span><span class="o">.</span><span class="mi">1</span><span class="n">_zcu104</span><span class="o">/</span><span class="n">app</span> <span class="n">root</span><span class="o">@&lt;</span><span class="n">board</span> <span class="n">ip</span><span class="o">&gt;</span><span class="p">:</span><span class="o">~/</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="running-the-application">
<h2>Running the application<a class="headerlink" href="#running-the-application" title="Permalink to this headline">¶</a></h2>
<p>This section will elaborate on the usage of the application and various options with it.</p>
<p>Every time the board is booted, execute the steps mentioned below</p>
<ul>
<li><p>Run <cite>setup.sh</cite> on the board, this will set the alpha channel of the display port and copy label json files related
to each model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">app</span><span class="o">/</span>
<span class="o">./</span><span class="n">setup</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</li>
<li><p>Export the environment variable “XCLBIN_PATH” with path pointing to xclbin. If its not exported, <cite>/media/sd-mmcblk0p1/dpu.xclbin</cite> will be the default xclbin path.</p></li>
<li><p>Run the command to execute the application
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">smart_model_select</span>
</pre></div>
</div>
</li>
</ul>
<p>When the application starts executing, you can observe the Fig 1 coming up in the display. This menu displays various models supported by the application and options on either side of the image are for input sources and output sinks supported. All these options carry an index number alongside, which user need to enter in sequence to create the pipeline of choice.</p>
<img alt="../../_images/ExampleAppMenu.png" src="../../_images/ExampleAppMenu.png" />
<p>Fig 1: Menu image of the application</p>
<p>Below command line prompt will appear on console/command prompt when the application starts, which will accept the input options for creating the Gstreamer pipeline of choice. As described below, user has to enter four options in the sequence of input source, ML model to be used, output sink and a field to enable/disable performance mode. Example the sequence “1,2,3,0”, tells that the source is “filesrc”, ML model to be used is “resnet18”, sink is “kmssink” and 0 is to disable performance mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span>
<span class="n">Menu</span> <span class="n">displayed</span> <span class="n">on</span> <span class="n">the</span> <span class="n">monitor</span> <span class="n">shows</span> <span class="n">various</span> <span class="n">options</span> <span class="n">available</span>
<span class="k">for</span> <span class="nb">input</span> <span class="n">source</span><span class="p">,</span> <span class="n">ML</span> <span class="n">model</span><span class="p">,</span> <span class="n">output</span> <span class="n">sink</span><span class="o">.</span> <span class="n">Each</span> <span class="n">option</span> <span class="n">carry</span> <span class="n">an</span>
<span class="n">index</span> <span class="n">number</span> <span class="n">along</span> <span class="n">side</span><span class="o">.</span>
<span class="n">Select</span> <span class="n">elements</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">pipeline</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">sequence</span> <span class="n">of</span>
<span class="s2">&quot;input source, ML model, output sink and performance</span>
<span class="n">mode</span> <span class="n">flag</span><span class="s2">&quot; seperated by commas.</span>
<span class="n">eg</span> <span class="nb">input</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span>
<span class="n">Above</span> <span class="nb">input</span> <span class="n">will</span> <span class="n">run</span> <span class="s2">&quot;filesrc&quot;</span> <span class="nb">input</span><span class="p">,</span> <span class="s2">&quot;resnet50&quot;</span> <span class="n">model</span>
<span class="s2">&quot;kmssink&quot;</span> <span class="n">used</span> <span class="k">as</span> <span class="n">output</span> <span class="n">sink</span> <span class="ow">and</span> <span class="n">performance</span> <span class="n">mode</span> <span class="n">disabled</span><span class="o">.</span>
<span class="n">Enter</span> <span class="s1">&#39;q&#39;</span> <span class="n">to</span> <span class="n">exit</span>
<span class="n">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If performance mode is enabled then the sink type should always be <code class="docutils literal notranslate"><span class="pre">fakesink</span></code>. Otherwise pipeline will not execute.</p>
<p>If performance mode is enabled, there will be 4 ML pipelines executed simultaneously feeding DPU from multiple threads. This results in improved performance compared to when using DPU from single thread.</p>
</div>
<p>Followed by the selection of ML model, source and sink elements, next step is the option to provide input filename or RTSP URL as applicable, to be processed.</p>
<p>If the selected input is file source, then by default application will look for the input video files under <cite>app/videos</cite> folder.
Create the folder <code class="docutils literal notranslate"><span class="pre">/home/root/app/videos</span></code> and copy the video files here with names given below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">videos</span><span class="o">/</span>
<span class="o">+--</span> <span class="n">CLASSIFICATION</span><span class="o">.</span><span class="n">mp4</span>
<span class="o">+--</span> <span class="n">FACEDETECT</span><span class="o">.</span><span class="n">mp4</span>
<span class="o">+--</span> <span class="n">REFINEDET</span><span class="o">.</span><span class="n">mp4</span>
<span class="o">+--</span> <span class="n">SSD</span><span class="o">.</span><span class="n">mp4</span>
<span class="o">+--</span> <span class="n">YOLOV2</span><span class="o">.</span><span class="n">mp4</span>
<span class="o">+--</span> <span class="n">YOLOV3</span><span class="o">.</span><span class="n">mp4</span>
</pre></div>
</div>
<p>If the file is not available in this folder then application will prompt for the input file. All files must be named after ML model type as given below.
User has to enter the input file location in response to the below message prompt.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">filename</span> <span class="n">to</span> <span class="n">be</span> <span class="n">processed</span>
</pre></div>
</div>
<p>If the selected input source is “RTSP”, then application will prompt for entering “RTSP” URL.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Enter</span> <span class="n">the</span> <span class="n">RTSP</span> <span class="n">url</span> <span class="n">to</span> <span class="n">be</span> <span class="n">processed</span>
</pre></div>
</div>
<p>The application supports RTSP input with RTP packets containing H264 payload of resolution 1920x1080. One can download and setup Gstreamer RTSP server or VLC can also be used to serve RTSP data. Follow below steps to compile Gstreamer RTSP server. For successful compilation of Gstreamer RTSP server, Gstreamer framework must be installed as a prerequisite.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.</span>  <span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gstreamer</span><span class="o">.</span><span class="n">freedesktop</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">gst</span><span class="o">-</span><span class="n">rtsp</span><span class="o">-</span><span class="n">server</span><span class="o">/</span><span class="n">gst</span><span class="o">-</span><span class="n">rtsp</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">1.16</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="mf">2.</span>  <span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">gst</span><span class="o">-</span><span class="n">rtsp</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">1.16</span><span class="o">.</span><span class="mf">2.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
<span class="mf">3.</span>  <span class="n">cd</span> <span class="n">gst</span><span class="o">-</span><span class="n">rtsp</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">1.16</span><span class="o">.</span><span class="mi">2</span><span class="o">/</span>
<span class="mf">4.</span>  <span class="o">./</span><span class="n">autogen</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">gtk</span><span class="o">-</span><span class="n">doc</span>
<span class="mf">5.</span>  <span class="n">make</span>
</pre></div>
</div>
<p>Examples in gst-rtsp-server-1.16.2/examples can be used to serve RTSP data. Refer below example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">gst</span><span class="o">-</span><span class="n">rtsp</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">1.16</span><span class="o">.</span><span class="mi">2</span><span class="o">/</span><span class="n">examples</span>
<span class="o">./</span><span class="n">test</span><span class="o">-</span><span class="n">launch</span>  <span class="s2">&quot;filesrc location=&lt;File with H264 1080p in MP4 format&gt; ! qtdemux  ! h264parse ! rtph264pay name=pay0 pt=96&quot;</span>
</pre></div>
</div>
<p>Streaming starts on the URL <a class="reference external" href="rtsp:/">rtsp:/</a>/&lt;RTSP server ip adress&gt;:8554/test. Enter the same URL as input to the application.</p>
<p>Application supports multiple sink options as well. If <code class="docutils literal notranslate"><span class="pre">kmssink</span></code> is used, output video will be rendered on the display monitor connected. If <code class="docutils literal notranslate"><span class="pre">filesink</span></code> is chosen the output will get dumped to a file by name “output.nv12” in the current directory. On the other hand, <code class="docutils literal notranslate"><span class="pre">fakesink</span></code> acts a black hole for the data with no overhead.</p>
<p>Below Fig 2 is the pictorial depiction of a typical pipeline that is created by the application.</p>
<img alt="../../_images/ExamplePipeline.png" src="../../_images/ExamplePipeline.png" />
<p>Fig 2: Typical Gstreamer pipeline that application creates</p>
</div>
<div class="section" id="build-design">
<span id="build-platform"></span><h2>Build Design<a class="headerlink" href="#build-design" title="Permalink to this headline">¶</a></h2>
<p>The Design consists of a base platform and integrated accelerator functions (Kernels).</p>
<div class="section" id="base-platform">
<h3>Base Platform<a class="headerlink" href="#base-platform" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Model</span> <span class="pre">Select</span></code> application requires video decoding, resizing the decoded frames, Machine Learning and finally display the output. Hence we need a platform that fulfills these requirement. This VVAS release has <code class="docutils literal notranslate"><span class="pre">zcu104_vcuDec_DP</span></code> base platform that meets the requirements of decode and display. This platform has hardware accelerated video decoding IP, Video Codec Unit <code class="docutils literal notranslate"><span class="pre">VCU</span></code>. For display, this platform supports <code class="docutils literal notranslate"><span class="pre">Display</span> <span class="pre">Port</span></code>.</p>
<p>In addition to the above mentioned hardware components, <code class="docutils literal notranslate"><span class="pre">zcu104_vcuDec_DP</span></code> supports following software components</p>
<ul class="simple">
<li><p>omxh264dec Gstreamer plugin</p></li>
<li><p>Opensource framework like Gstreamer, OpenCV</p></li>
<li><p>Vitis AI 1.4 libraries</p></li>
<li><p>Xilinx Run Time (XRT)</p></li>
</ul>
</div>
<div class="section" id="compiling-base-platform">
<h3>Compiling base platform<a class="headerlink" href="#compiling-base-platform" title="Permalink to this headline">¶</a></h3>
<p>Complete sources along with workspace to build the platform is provided as part of this release.
Follow the steps mentioned below to compile the platform.</p>
<p>1.  Navigate to the folder, say <code class="docutils literal notranslate"><span class="pre">VVAS_SOURCES</span></code>,  where you want to clone the VVAS source tree.</p>
<p>2.  Clone VVAS repo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitenterprise</span><span class="o">.</span><span class="n">xilinx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">IPS</span><span class="o">-</span><span class="n">SSW</span><span class="o">/</span><span class="n">ivas</span>
</pre></div>
</div>
<p>3.  Setup tool chain environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">&lt;</span><span class="mf">2021.1</span><span class="n">_Vitis</span><span class="o">&gt;/</span><span class="n">settings64</span><span class="o">.</span><span class="n">sh</span>
<span class="n">source</span> <span class="o">&lt;</span><span class="mf">2021.1</span><span class="n">_Petalinux</span><span class="o">&gt;/</span><span class="n">settings</span><span class="o">.</span><span class="n">sh</span>
<span class="n">source</span> <span class="o">&lt;</span><span class="mf">2021.1</span><span class="n">_XRT</span><span class="o">&gt;/</span><span class="n">setenv</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>4.  Navigate to <code class="docutils literal notranslate"><span class="pre">zcu104_vcuDec_DP</span></code> platform folder</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">platforms</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">zcu104_vcuDec_DP</span>
</pre></div>
</div>
<p>5.  Compile the platform</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span>
</pre></div>
</div>
<p id="platform-path">After build is finished, platform will be available <cite>&lt;VVAS_SOURCES&gt;/ivas/ivas-platforms/Embedded/zcu104_vcuDec_DP/platform_repo/xilinx_zcu104_vcuDec_DP_202110_1/export/xilinx_zcu104_vcuDec_DP_202110_1/</cite> location.</p>
</div>
<div class="section" id="hardware-accelerators-kernels">
<h3>Hardware Accelerators (Kernels)<a class="headerlink" href="#hardware-accelerators-kernels" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Model</span> <span class="pre">Select</span></code> application’s requirements of Machine Learning and Resize operations are fulfilled by below mentioned accelerators (Kernels):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DPU</span></code> (Deep Learning Processing Unit) for Machine Learning.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Multiscaler</span></code> for Preprocessing operation</p></li>
</ul>
</div>
</div>
<div class="section" id="compiling-hardware-accelerators-kernels">
<h2>Compiling Hardware Accelerators (Kernels)<a class="headerlink" href="#compiling-hardware-accelerators-kernels" title="Permalink to this headline">¶</a></h2>
<p>The sources for hardware accelerators required for <code class="docutils literal notranslate"><span class="pre">Smart</span> <span class="pre">Model</span> <span class="pre">Select</span></code> application can be made avaiable as mentioned below:</p>
<p>1. Navigate to &lt;VVAS_SOURCES&gt;</p>
<p>2. DPU Kernel sources can be cloned from</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Xilinx</span><span class="o">/</span><span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">/</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">tags</span><span class="o">/</span><span class="n">v1</span><span class="o">.</span><span class="mi">4</span> <span class="o">-</span><span class="n">b</span> <span class="n">v1</span><span class="o">.</span><span class="mi">4</span>
</pre></div>
</div>
<p>3. Multiscaler kernel sources are part of VVAS source tree and are located at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">accel</span><span class="o">-</span><span class="n">hw</span><span class="o">/</span><span class="n">multiscaler</span>
</pre></div>
</div>
<p>Kernels may have different configurations for different application requirements.
Hence it is recommended to build the Kernels from the application design workspace with the required Kernel configuration for that application.
Each application design workspace provided with this VVAS release has the required Kernel configurations for that application.
In case one wants to change the kernel configuration for some reason, do these changes in the configuration files mentioned below.
Compilation of Kernels is initiated from the build process of the final design for the application.
Hence kernel compilatioin steps are not covered separtely here.</p>
<ul>
<li><p>Configuration of DPU</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">examples</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">smart_model_select</span><span class="o">/</span><span class="n">dpu_conf</span><span class="o">.</span><span class="n">vh</span>
</pre></div>
</div>
</li>
<li><p>Configuion of Multiscaler</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">examples</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">smart_model_select</span><span class="o">/</span><span class="n">v_multi_scaler_config</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
</li>
</ul>
<p>You may modify the kernel configuration as per your requirements in these files.</p>
</div>
<div class="section" id="creating-sd-card-image">
<h2>Creating SD Card image<a class="headerlink" href="#creating-sd-card-image" title="Permalink to this headline">¶</a></h2>
<p>Once platform is available and kernels are built, next step is to stitch the required hardware accelerators (kernels) into the platform and generate final SD Card image using Vitis Flow.</p>
<p>VVAS sources already has ready to build example Vitis workspace for <code class="docutils literal notranslate"><span class="pre">smart_model_select</span></code> Application. This workspace uses Vitis Flow that stitches kernels into the platform and generates final SD card image. Follow below mentioned steps to build the final image.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">examples</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">smart_model_select</span>
<span class="n">make</span> <span class="n">PLATFORM</span><span class="o">=&lt;</span><span class="n">PLATFORM_PATH</span> <span class="o">&gt;</span> <span class="n">DPU_TRD_PATH</span><span class="o">=&lt;</span><span class="n">DPU_PATH</span><span class="o">&gt;</span> <span class="n">HW_ACCEL_PATH</span><span class="o">=&lt;</span><span class="n">MULTISCALER_PATH</span><span class="o">&gt;</span>

<span class="n">PLATFORM_PATH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">platforms</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">zcu104_vcuDec_DP</span><span class="o">/</span><span class="n">platform_repo</span><span class="o">/</span><span class="n">xilinx_zcu104_vcuDec_DP_202110_1</span><span class="o">/</span><span class="n">export</span><span class="o">/</span><span class="n">xilinx_zcu104_vcuDec_DP_202110_1</span><span class="o">/</span><span class="n">xilinx_zcu104_vcuDec_DP_202110_1</span><span class="o">.</span><span class="n">xpfm</span>
<span class="n">DPU_PATH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">Vitis</span><span class="o">-</span><span class="n">AI</span><span class="o">/</span><span class="n">dsa</span><span class="o">/</span><span class="n">DPU</span><span class="o">-</span><span class="n">TRD</span><span class="o">/</span>
<span class="n">MULTISCALER_PATH</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">accel</span><span class="o">-</span><span class="n">hw</span>
</pre></div>
</div>
<p>Once above build is done, final sdcard image is available at <code class="docutils literal notranslate"><span class="pre">./binary_container_1/sd_card.img</span></code> location.</p>
</div>
<div class="section" id="build-vvas-plug-ins-and-libraries">
<span id="build-vvas-plugins-and-libs"></span><h2>Build VVAS Plug-ins and Libraries<a class="headerlink" href="#build-vvas-plug-ins-and-libraries" title="Permalink to this headline">¶</a></h2>
<p>VVAS Plugins and libaries are part of petalinux bsp and are built along with building platform. So no need to build again. Still if one wants to build these for some reason, follow the steps mentioned below,</p>
<div class="section" id="setting-sysroot">
<h3>Setting Sysroot<a class="headerlink" href="#setting-sysroot" title="Permalink to this headline">¶</a></h3>
<p>Sysroot is required to build the VVAS GStreamer plugins. Sysroot installer location depends on whether you are using pre-built binaries or you have built the platform from scratch.</p>
<p>If you have downloaded the pre-built binaries in folder, say <code class="docutils literal notranslate"><span class="pre">PREBUILT_BINARIES</span></code>, then you can find the Sysroot installer at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">PREBUILT_BINARIES</span><span class="o">&gt;/</span><span class="n">vvas_smart_model_select_2021</span><span class="o">.</span><span class="mi">1</span><span class="n">_zcu104</span><span class="o">/</span><span class="n">sdk</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>If you have built the platform yourself, then Sysroot installer is available at</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">platforms</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">zcu104_vcuDec_DP</span><span class="o">/</span><span class="n">platform_repo</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">sw_components</span><span class="o">/</span><span class="n">sdk</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>One need to install the sysroot. Create a folder, say <strong>sysroot</strong> in <cite>VVAS_SOURCES</cite>. Command for sysroot generation is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">sdk</span><span class="o">.</span><span class="n">sh</span><span class="o">&gt;/</span><span class="n">sdk</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">d</span> <span class="n">VVAS_SOURCES</span><span class="o">/</span><span class="n">sysroot</span><span class="o">/</span>
</pre></div>
</div>
<p>Now sysroot is installed. You are ready to build plugins and applications.</p>
</div>
<div class="section" id="build-plugins-and-libraries">
<h3>Build Plugins and Libraries<a class="headerlink" href="#build-plugins-and-libraries" title="Permalink to this headline">¶</a></h3>
<p>Get the VVAS Sources if not done already. Follow the steps mentioned below.</p>
<ul>
<li><p>Navigate to the folder, say <code class="docutils literal notranslate"><span class="pre">VVAS_SOURCES</span></code>,  where you want to clone the VVAS source tree.</p></li>
<li><p>Clone VVAS repo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitenterprise</span><span class="o">.</span><span class="n">xilinx</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">IPS</span><span class="o">-</span><span class="n">SSW</span><span class="o">/</span><span class="n">ivas</span>
</pre></div>
</div>
<p>VVAS Source tree structure is described below:</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/image10.png"><img alt="../../_images/image10.png" src="../../_images/image10.png" style="width: 300px;" /></a>
</div>
<ul class="simple">
<li><p><strong>ivas-utils:</strong> This folder contains the source code for the VVAS kernel interface to be exposed by the acceleration software libraries, abstraction APIs on top of the Xilinx Runtime (XRT) tool, and common headers (for example, metadata).</p></li>
<li><p><strong>ivas-gst-plugins:</strong> This folder contains all the VVAS GSteamer plug-ins, including the infrastructure plug-ins and the Custom plug-ins.</p></li>
<li><p><strong>ivas-accel-sw-libs:</strong> Contains source for the acceleration software libraries that are called from the GStreamer infrastructure plug-ins.</p></li>
<li><p><strong>ivas-accel-hw:</strong> This folder contains the hardware kernel source code.</p></li>
<li><p><strong>ivas-examples:</strong> This repository hosts example solutions.</p></li>
<li><p><strong>ivas-platforms:</strong> This folder contains the reference platforms for different applications.</p></li>
</ul>
</li>
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">VVAS_SOURCES/ivas</span></code> folder</p></li>
<li><p>Unset the LD library path environment variable.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unset</span> <span class="n">LD_LIBRARY_PATH</span>
</pre></div>
</div>
</li>
<li><p>Set the sysroot path</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">VVAS_SOURCES</span><span class="o">/</span><span class="n">sysroot</span><span class="o">/</span><span class="n">environment</span><span class="o">-</span><span class="n">setup</span><span class="o">-</span><span class="n">cortexa72</span><span class="o">-</span><span class="n">cortexa53</span><span class="o">-</span><span class="n">xilinx</span><span class="o">-</span><span class="n">linux</span>
</pre></div>
</div>
<p>You must have write permission to the sysroot.</p>
</li>
<li><p>Build VVAS plugins and libraries</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">build</span><span class="o">-</span><span class="n">ivas</span><span class="o">-</span><span class="n">essential</span><span class="o">.</span><span class="n">sh</span> <span class="n">Edge</span>
</pre></div>
</div>
</li>
<li><p>When above step is complete, VVAS plugins are generated as <strong>install/ivas_installer.tar.gz</strong>.</p></li>
<li><p>Copy <code class="docutils literal notranslate"><span class="pre">install/ivas_installer.tar.gz</span></code> onto the root folder (/) of the target board and untar it. VVAS Plugins are now installed on the target device.</p></li>
</ul>
</div>
<div class="section" id="build-smart-model-select-application">
<h3>Build Smart Model Select Application<a class="headerlink" href="#build-smart-model-select-application" title="Permalink to this headline">¶</a></h3>
<p>The example application (smart_model_select) is available in the “ivas-example” section of VVAS repository. Follow below steps to compile the application.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">VVAS_SOURCES</span><span class="o">&gt;/</span><span class="n">ivas</span><span class="o">/</span><span class="n">ivas</span><span class="o">-</span><span class="n">examples</span><span class="o">/</span><span class="n">Embedded</span><span class="o">/</span><span class="n">smart_model_select</span><span class="o">/</span><span class="n">src</span>
<span class="n">unset</span> <span class="n">LD_LIBRARY_PATH</span>
<span class="n">source</span> <span class="o">&lt;</span><span class="n">sysroot</span> <span class="n">path</span><span class="o">&gt;/</span><span class="n">environment</span><span class="o">-</span><span class="n">setup</span><span class="o">-</span><span class="n">cortexa72</span><span class="o">-</span><span class="n">cortexa53</span><span class="o">-</span><span class="n">xilinx</span><span class="o">-</span><span class="n">linux</span>
<span class="n">make</span> <span class="n">SYSROOT</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">sysroot</span> <span class="n">path</span><span class="o">&gt;/</span><span class="n">sysroots</span><span class="o">/</span><span class="n">cortexa72</span><span class="o">-</span><span class="n">cortexa53</span><span class="o">-</span><span class="n">xilinx</span><span class="o">-</span><span class="n">linux</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="6-embedded-plugins.html" class="btn btn-neutral float-right" title="VVAS GStreamer Plug-ins for Embedded Platforms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Tutorials/MultiChannelML.html" class="btn btn-neutral float-left" title="Multichannel ML" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on July 29, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>